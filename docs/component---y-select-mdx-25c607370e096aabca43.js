(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{988:function(e,n,t){"use strict";t.r(n);t(12),t(6),t(7),t(4),t(8),t(5),t(171),t(9),t(1);var l=t(81),c=t(972),r=t(33),o=t(998),a=t(973),i="import React, { useState, useRef, useMemo, useCallback } from 'react';\nimport {getGenericThemableSubcomponentBuilder, useClickOutsideHandler} from '../../util.js';\nimport {ThemableYSelectValueContainer} from './YSelectValueContainer.js';\nimport {ThemableYSelectIndicatorContainer} from './YSelectIndicatorContainer.js';\nimport {ThemableYSelectMenuContainer, ThemableYSelectMenuOption} from './YSelectMenuContainer.js';\nimport './YSelectComponents.css';\n\nconst genSubcomponent = getGenericThemableSubcomponentBuilder('y select', globalTheme => ((globalTheme.YBasic || {}).YSelect || {}));\n\n/**\n * TODO LIST:\n * close menu on input ref blur\n */\nexport const ThemableYSelect = globalTheme =>  {\n    const YSelectComponent = ({\n        options = [],\n        placeholder = 'Select...',\n        clearable = true,\n        searchable = true,\n        noIndicators = false,\n        selected,\n        onChange,\n        forwardedRef,\n        ...rest\n    }) => {\n\n        const Wrapper = useMemo(() => genSubcomponent('', {forwardRef: true})(globalTheme), []);\n        const Stage = useMemo(() => genSubcomponent('stage')(globalTheme), []);\n\n        const ValueContainer = useMemo(() => ThemableYSelectValueContainer(globalTheme), []);\n        const IndicatorContainer = useMemo(() => ThemableYSelectIndicatorContainer(globalTheme), []);\n\n        const Menu = useMemo(() => ThemableYSelectMenuContainer(globalTheme), []);\n        const MenuOption = useMemo(() => ThemableYSelectMenuOption(globalTheme), []);\n\n        const [menuOpen, setMenuOpen] = useState(false);\n        const [searchString, setSearchString] = useState('');\n        const [kbIndex, setKbIndex] = useState(null);\n\n        const wrapperRef = useRef();\n        const inputRef = useRef();\n\n        const closeMenu = () => {\n            setMenuOpen(false); setSearchString(''); setKbIndex(null);\n        }\n\n        useClickOutsideHandler(wrapperRef, useCallback(() => {\n            if(menuOpen) {\n                closeMenu();\n            }\n        }, [menuOpen]));\n\n        const filteredOptions = useMemo(\n            () => options.filter(({label}) => label.toLowerCase().includes(searchString.toLowerCase())),\n            [searchString, options]\n        );\n\n        const scrollBack = useCallback(node => {\n            if(node !== null) { // TODO add necessity check\n                if(node.scrollIntoViewIfNeeded) {\n                    node.scrollIntoViewIfNeeded();\n                } else {\n                    node.parentNode.scrollTop = node.offsetTop;\n                }\n            }\n        }, []);\n\n        const selectedAndOrHighlightedRef = (selected, highlighted) => {\n            if((selected && kbIndex === null) || highlighted) {\n                return {ref: scrollBack};\n            } else {\n                return {}\n            }\n        }\n\n        const lastKeyTime = useRef(new Date().getTime());\n\n        const onArrow = eKey => {\n            const keyTime = new Date().getTime();\n            if((keyTime - lastKeyTime.current) > 30) {\n                let nextIndex = 0;\n                if(kbIndex !== null){\n                    if(eKey === 'ArrowDown') {\n                        nextIndex = kbIndex + 1;\n                    }\n                    if(eKey === 'ArrowUp') {\n                        nextIndex = kbIndex - 1;\n                    }\n                }\n                if(nextIndex < 0) {\n                    nextIndex = filteredOptions.length - 1;\n                }\n                if(nextIndex >= filteredOptions.length) {\n                    nextIndex = 0;\n                }\n                if(kbIndex !== nextIndex){\n                    setTimeout(() => setKbIndex(nextIndex), 0);\n                }\n                lastKeyTime.current = keyTime;\n            } else {\n                console.log('skipped'); // remove throttler?\n            }\n        }\n        const keyHandlers = {\n            ArrowDown: onArrow,\n            ArrowUp: onArrow,\n            Enter: () => {\n                if(kbIndex !== null && kbIndex >= 0 && kbIndex < filteredOptions.length) {\n                    const selectedValue = filteredOptions[kbIndex].value;\n                    closeMenu();\n                    onChange(selectedValue);\n                    inputRef.current && inputRef.current.blur();\n                } else {\n                    setKbIndex(0);\n                }\n            },\n            Escape: () => {\n                closeMenu();\n            }\n        }\n        const onInputKeyDown = e => {\n            const eKey = e.key;\n            if(keyHandlers[eKey]) {\n                keyHandlers[eKey](eKey);\n                e.preventDefault();\n            }\n        }\n\n        const toggleMenu = () => {\n            if(menuOpen) {\n                closeMenu();\n            } else {\n                setMenuOpen(true);\n                console.log(inputRef.current);\n                inputRef.current && inputRef.current.focus();\n            }\n        }\n\n        const clearSelection = useCallback(() => {\n            const wasNull = selected === null;\n            if(!wasNull) {\n                onChange(null);\n            }\n        }, [selected, onChange]);\n\n        const onSearchStringChange = e => setSearchString(e.target.value);\n\n        const menuOptions = filteredOptions  // TODO memoize\n            .map(({value, label}, i) => (\n                <MenuOption \n                    className={(value === selected ? 'selected' : '') + (i === kbIndex ? ' highlighted' : '')}\n                    data-value={value} // I'm here for dev tool visibility\n                    onClick={() => {closeMenu(); selected !== value && onChange(value);}}\n                    key={`${value}-${i}`}\n                    {...selectedAndOrHighlightedRef(value === selected, i === kbIndex)}\n                >\n                    {label}\n                </MenuOption>));\n\n        return (\n            <Wrapper ref={wrapperRef}>\n                <Stage {...rest}>\n                    <ValueContainer\n                        menuOpen={menuOpen}\n                        toggleMenu={toggleMenu}\n                        selected={selected}\n                        options={options}\n                        placeholder={placeholder}\n                        searchable={searchable}\n                        onChange={onSearchStringChange}\n                        onKeyDown={onInputKeyDown}\n                        searchString={searchString}\n                        ref={inputRef}\n                    />\n                    {!noIndicators && <IndicatorContainer\n                        selected={selected}\n                        clearable={clearable}\n                        clearSelection={clearSelection}\n                        toggleMenu={toggleMenu}\n                    />}\n                </Stage>\n                <Menu\n                    menuOpen={menuOpen}\n                    menuOptions={menuOptions}\n                    options={options}\n                />\n            </Wrapper>);\n    \n    }\n    YSelectComponent.displayName = 'YSelect';\n    return YSelectComponent;\n}\n\n\nexport default ThemableYSelect();";function u(){return(u=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}t.d(n,"_frontmatter",(function(){return s})),t.d(n,"default",(function(){return d}));var s={};void 0!==s&&s&&s===Object(s)&&Object.isExtensible(s)&&Object.defineProperty(s,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"YSelect.mdx"}});var f={_frontmatter:s},b=c.a;function d(e){var n=e.components,t=function(e,n){if(null==e)return{};var t,l,c={},r=Object.keys(e);for(l=0;l<r.length;l++)t=r[l],n.indexOf(t)>=0||(c[t]=e[t]);return c}(e,["components"]);return Object(l.b)(b,u({},f,t,{components:n,mdxType:"MDXLayout"}),Object(l.b)("p",null,"Quality: Sophistication"),Object(l.b)("h1",{id:"yselectcomponents"},"YSelectComponents"),Object(l.b)("h2",{id:"single-select"},"Single Select"),Object(l.b)("p",null,"i work with the keyboard too"),Object(l.b)(r.c,{__position:0,__code:"<UncontrolledYSelect\n  clearable={true || 'default'}\n  placeholder={'Select...' || 'default'}\n  searchable={true || 'default'}\n  noIndicators={false && 'default'}\n  options={Array(100) // array of {value, label}\n    .fill()\n    .map((_, i) => ({\n      value: i,\n      label: `${i % 2 == 0 ? 'B' : 'Z'}${(i * 7) % 3 == 0 ? 'ee' : 'oo'}${\n        i % 3 == 0 ? 'p' : i % 3 == 1 ? 'm' : 'k'\n      }`,\n    }))}\n  onChange={\n    value => alert(`Id ${value} selected!`)\n    //() => {} // disable alert\n  }\n/>",__scope:{props:t,DefaultLayout:c.a,Playground:r.c,UncontrolledYSelect:o.a,SourceDisplay:a.a,source:i},mdxType:"Playground"},Object(l.b)(o.a,{clearable:!0,placeholder:"Select...",searchable:!0,noIndicators:!1,options:Array(100).fill().map((function(e,n){return{value:n,label:(n%2==0?"B":"Z")+(7*n%3==0?"ee":"oo")+(n%3==0?"p":n%3==1?"m":"k")}})),onChange:function(e){return alert("Id "+e+" selected!")},mdxType:"UncontrolledYSelect"})),Object(l.b)("h1",{id:"source"},"Source"),Object(l.b)(a.a,{source:i,mdxType:"SourceDisplay"}))}d&&d===Object(d)&&Object.isExtensible(d)&&Object.defineProperty(d,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"YSelect.mdx"}}),d.isMDXComponent=!0},997:function(e,n,t){"use strict";t(5),t(56),t(59),t(6),t(7),t(4),t(8),t(12);var l=t(9),c=t(1),r=t.n(c),o=t(969);t(971);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}var i=Object(o.c)("y select value",(function(e){return(e.YBasic||{}).YSelect||{}})),u=function(e){var n=i("container")(e),t=i("placeholder")(e),c=i("single value")(e),o=i("input wrapper")(e),u=i("input stage")(e),s=i("input",{Tag:"input",forwardRef:!0})(e),f=function(e){var r=e.menuOpen,i=e.toggleMenu,f=e.selected,b=e.options,d=e.placeholder,p=e.searchable,m=e.child,O=void 0===m?{}:m,h=e.tabindex,g=void 0===h?"0":h,j=e.searchString,S=e.forwardedRef,v=e.onChange,Y=e.onKeyDown,y=function(e,n){if(null==e)return{};var t,l,c={},r=Object.keys(e);for(l=0;l<r.length;l++)t=r[l],n.indexOf(t)>=0||(c[t]=e[t]);return c}(e,["menuOpen","toggleMenu","selected","options","placeholder","searchable","child","tabindex","searchString","forwardedRef","onChange","onKeyDown"]);return Object(l.c)(n,a({onClick:i},y),!(p&&r)&&(null==f?Object(l.c)(t,O,d):Object(l.c)(c,O,b.filter((function(e){return e.value===f}))[0].label)),Object(l.c)(o,null,Object(l.c)(u,null,Object(l.c)(s,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",spellCheck:"false",tabIndex:g,type:"text","aria-autocomplete":"list",value:j,ref:S,onChange:v,onKeyDown:Y,onFocus:function(){r||i()},onClick:function(e){return e.stopPropagation(),!1},style:{opacity:p&&r?"1":"0"}}))))};return f.displayName="YSelectValueContainer",r.a.forwardRef((function(e,n){return Object(l.c)(f,a({},e,{forwardedRef:n}))}))};u&&u===Object(u)&&Object.isExtensible(u)&&Object.defineProperty(u,"__filemeta",{configurable:!0,value:{name:"ThemableYSelectValueContainer",filename:"src/YBasic/YSelect/YSelectValueContainer.js"}}),u&&u===Object(u)&&Object.isExtensible(u)&&Object.defineProperty(u,"__filemeta",{configurable:!0,value:{name:"ThemableYSelectValueContainer",filename:"src/YBasic/YSelect/YSelectValueContainer.js"}});u();var s="M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z";s===Object(s)&&Object.isExtensible(s)&&Object.defineProperty(s,"__filemeta",{configurable:!0,value:{name:"clearablePath",filename:"src/YBasic/YSelect/YSelectSVGs.js"}}),s===Object(s)&&Object.isExtensible(s)&&Object.defineProperty(s,"__filemeta",{configurable:!0,value:{name:"clearablePath",filename:"src/YBasic/YSelect/YSelectSVGs.js"}});var f="M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z";f===Object(f)&&Object.isExtensible(f)&&Object.defineProperty(f,"__filemeta",{configurable:!0,value:{name:"dropdownPath",filename:"src/YBasic/YSelect/YSelectSVGs.js"}}),f===Object(f)&&Object.isExtensible(f)&&Object.defineProperty(f,"__filemeta",{configurable:!0,value:{name:"dropdownPath",filename:"src/YBasic/YSelect/YSelectSVGs.js"}});var b=Object(o.c)("y select indicator",(function(e){return(e.YBasic||{}).YSelect||{}})),d=function(e){var n=b("container")(e),t=b("separator")(e),c=b("clearable",{Tag:"button"})(e),r=b("clearable svg",{Tag:"svg",propMutator:function(){return{height:"20px",width:"20px",viewBox:"0 0 20 20","aria-hidden":!0,focusable:!1,children:Object(l.c)("path",{d:s})}}})(e),o=b("dropdown",{Tag:"button"})(e),a=b("dropdown svg",{Tag:"svg",propMutator:function(){return{height:"20px",width:"20px",viewBox:"0 0 20 20","aria-hidden":!0,focusable:!1,children:Object(l.c)("path",{d:f})}}})(e);return function(e){var i=e.selected,u=e.clearable,s=e.clearSelection,f=e.toggleMenu;return Object(l.c)(n,null,u&&null!==i&&Object(l.c)(c,{onClick:s,"aria-label":"clear selection"},Object(l.c)(r,null)),Object(l.c)(t,null),Object(l.c)(o,{onClick:f,"aria-label":"open menu"},Object(l.c)(a,null)))}};function p(){return(p=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}d&&d===Object(d)&&Object.isExtensible(d)&&Object.defineProperty(d,"__filemeta",{configurable:!0,value:{name:"ThemableYSelectIndicatorContainer",filename:"src/YBasic/YSelect/YSelectIndicatorContainer.js"}}),d&&d===Object(d)&&Object.isExtensible(d)&&Object.defineProperty(d,"__filemeta",{configurable:!0,value:{name:"ThemableYSelectIndicatorContainer",filename:"src/YBasic/YSelect/YSelectIndicatorContainer.js"}});var m=Object(o.c)("y select menu",(function(e){return(e.YBasic||{}).YSelect||{}})),O=m("option",{forwardRef:!0});void 0!==O&&O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{configurable:!0,value:{name:"ThemableYSelectMenuOption",filename:"src/YBasic/YSelect/YSelectMenuContainer.js"}}),void 0!==O&&O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{configurable:!0,value:{name:"ThemableYSelectMenuOption",filename:"src/YBasic/YSelect/YSelectMenuContainer.js"}});var h=function(e){var n=m()(e),t=m("list")(e),c=m("empty")(e),o=function(e){var r=e.menuOpen,o=e.menuOptions,a=e.options;return r&&Object(l.c)(n,null,Object(l.c)(t,null,o.length?o:Object(l.c)(c,null,a.length?"No options match":"No options")))};return o.displayName="YSelectMenuContainer",r.a.forwardRef((function(e,n){return Object(l.c)(o,p({},e,{forwardedRef:n}))}))};h&&h===Object(h)&&Object.isExtensible(h)&&Object.defineProperty(h,"__filemeta",{configurable:!0,value:{name:"ThemableYSelectMenuContainer",filename:"src/YBasic/YSelect/YSelectMenuContainer.js"}}),h&&h===Object(h)&&Object.isExtensible(h)&&Object.defineProperty(h,"__filemeta",{configurable:!0,value:{name:"ThemableYSelectMenuContainer",filename:"src/YBasic/YSelect/YSelectMenuContainer.js"}});h();function g(){return(g=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}t.d(n,"a",(function(){return S}));var j=Object(o.c)("y select",(function(e){return(e.YBasic||{}).YSelect||{}})),S=function(e){var n=function(n){var t=n.options,r=void 0===t?[]:t,a=n.placeholder,i=void 0===a?"Select...":a,s=n.clearable,f=void 0===s||s,b=n.searchable,p=void 0===b||b,m=n.noIndicators,S=void 0!==m&&m,v=n.selected,Y=n.onChange,y=(n.forwardedRef,function(e,n){if(null==e)return{};var t,l,c={},r=Object.keys(e);for(l=0;l<r.length;l++)t=r[l],n.indexOf(t)>=0||(c[t]=e[t]);return c}(n,["options","placeholder","clearable","searchable","noIndicators","selected","onChange","forwardedRef"])),C=Object(c.useMemo)((function(){return j("",{forwardRef:!0})(e)}),[]),w=Object(c.useMemo)((function(){return j("stage")(e)}),[]),x=Object(c.useMemo)((function(){return u(e)}),[]),T=Object(c.useMemo)((function(){return d(e)}),[]),M=Object(c.useMemo)((function(){return h(e)}),[]),I=Object(c.useMemo)((function(){return O(e)}),[]),k=Object(c.useState)(!1),_=k[0],R=k[1],P=Object(c.useState)(""),B=P[0],D=P[1],E=Object(c.useState)(null),K=E[0],V=E[1],N=Object(c.useRef)(),A=Object(c.useRef)(),U=function(){R(!1),D(""),V(null)};Object(o.d)(N,Object(c.useCallback)((function(){_&&U()}),[_]));var H=Object(c.useMemo)((function(){return r.filter((function(e){return e.label.toLowerCase().includes(B.toLowerCase())}))}),[B,r]),L=Object(c.useCallback)((function(e){null!==e&&(e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.parentNode.scrollTop=e.offsetTop)}),[]),G=Object(c.useRef)((new Date).getTime()),$=function(e){var n=(new Date).getTime();if(n-G.current>30){var t=0;null!==K&&("ArrowDown"===e&&(t=K+1),"ArrowUp"===e&&(t=K-1)),t<0&&(t=H.length-1),t>=H.length&&(t=0),K!==t&&setTimeout((function(){return V(t)}),0),G.current=n}else console.log("skipped")},z={ArrowDown:$,ArrowUp:$,Enter:function(){if(null!==K&&K>=0&&K<H.length){var e=H[K].value;U(),Y(e),A.current&&A.current.blur()}else V(0)},Escape:function(){U()}},W=function(){_?U():(R(!0),console.log(A.current),A.current&&A.current.focus())},X=Object(c.useCallback)((function(){null===v||Y(null)}),[v,Y]),J=H.map((function(e,n){var t=e.value,c=e.label;return Object(l.c)(I,g({className:(t===v?"selected":"")+(n===K?" highlighted":""),"data-value":t,onClick:function(){U(),v!==t&&Y(t)},key:t+"-"+n},function(e,n){return e&&null===K||n?{ref:L}:{}}(t===v,n===K)),c)}));return Object(l.c)(C,{ref:N},Object(l.c)(w,y,Object(l.c)(x,{menuOpen:_,toggleMenu:W,selected:v,options:r,placeholder:i,searchable:p,onChange:function(e){return D(e.target.value)},onKeyDown:function(e){var n=e.key;z[n]&&(z[n](n),e.preventDefault())},searchString:B,ref:A}),!S&&Object(l.c)(T,{selected:v,clearable:f,clearSelection:X,toggleMenu:W})),Object(l.c)(M,{menuOpen:_,menuOptions:J,options:r}))};return n.displayName="YSelect",n};void 0!==S&&S&&S===Object(S)&&Object.isExtensible(S)&&Object.defineProperty(S,"__filemeta",{configurable:!0,value:{name:"ThemableYSelect",filename:"src/YBasic/YSelect/YSelect.js"}}),void 0!==S&&S&&S===Object(S)&&Object.isExtensible(S)&&Object.defineProperty(S,"__filemeta",{configurable:!0,value:{name:"ThemableYSelect",filename:"src/YBasic/YSelect/YSelect.js"}});S()},998:function(e,n,t){"use strict";t(5),t(6),t(7),t(4),t(8),t(12);var l=t(9),c=t(1),r=t.n(c),o=t(997);function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}var i=function(e){var n=Object(o.a)(e),t=function(e,t){var r=e.onChange,o=function(e,n){if(null==e)return{};var t,l,c={},r=Object.keys(e);for(l=0;l<r.length;l++)t=r[l],n.indexOf(t)>=0||(c[t]=e[t]);return c}(e,["onChange"]),i=Object(c.useState)(null),u=i[0],s=i[1];Object(c.useImperativeHandle)(t,(function(){return{value:u}}),[u]);return Object(l.c)(n,a({selected:u,onChange:function(e){s(e),r(e)}},o))};return t.displayName="UncontrolledYSelect",r.a.forwardRef(t)};i&&i===Object(i)&&Object.isExtensible(i)&&Object.defineProperty(i,"__filemeta",{configurable:!0,value:{name:"ThemableUncontrolledYSelect",filename:"src/YBasic/YSelect/UncontrolledYSelect.js"}}),i&&i===Object(i)&&Object.isExtensible(i)&&Object.defineProperty(i,"__filemeta",{configurable:!0,value:{name:"ThemableUncontrolledYSelect",filename:"src/YBasic/YSelect/UncontrolledYSelect.js"}}),n.a=i()}}]);
//# sourceMappingURL=component---y-select-mdx-25c607370e096aabca43.js.map